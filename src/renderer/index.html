<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>CodeSync - Synchronisation en Temps R√©el</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1><span class="icon">üîÑ</span> CodeSync</h1>
            <div id="status">D√©connect√©</div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Welcome Section -->
            <div class="welcome" id="welcome">
                <h2>üöÄ Synchronisation de Code en Temps R√©el</h2>
                <p>Collaborez avec votre √©quipe - Le serveur a priorit√© absolue</p>
                
                <div class="cards">
                    <div class="card" onclick="selectProject()">
                        <div class="card-icon">üìÅ</div>
                        <h3>S√©lectionner Projet</h3>
                        <p>Choisir le dossier √† synchroniser</p>
                    </div>
                    
                    <div class="card" onclick="startHost()">
                        <div class="card-icon">üñ•Ô∏è</div>
                        <h3>D√©marrer Serveur</h3>
                        <p>Partager votre projet en tant qu'h√¥te</p>
                    </div>
                    
                    <div class="card" onclick="showConnect()">
                        <div class="card-icon">üîó</div>
                        <h3>Se Connecter</h3>
                        <p>Rejoindre un projet existant</p>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="dashboard" id="dashboard" style="display: none;">
                <!-- Left Panel - File Explorer -->
                <div class="dashboard-left">
                    <div class="file-explorer">
                        <div class="file-explorer-header">
                            <h3>üìÇ Fichiers du Projet</h3>
                            <div class="file-count" id="fileCount">0 fichiers</div>
                        </div>
                        <div class="file-list" id="fileList">
                            <div style="padding: 2rem; text-align: center; color: var(--text-secondary);">
                                Aucun projet s√©lectionn√©
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Controls & Activity -->
                <div class="dashboard-right">
                    <!-- Project Info -->
                    <div class="info-card">
                        <h3>üìÇ Projet Actuel</h3>
                        <div class="content">
                            <div id="projectInfo">Aucun projet s√©lectionn√©</div>
                            <button onclick="openProject()" id="openBtn" disabled style="margin-top: 1rem;">
                                üìÅ Ouvrir Dossier
                            </button>
                        </div>
                    </div>

                    <!-- Connection Status -->
                    <div class="info-card">
                        <h3>üåê √âtat de la Connexion</h3>
                        <div class="content">
                            <div id="connectionInfo">D√©connect√©</div>
                            <div id="clientsInfo" style="margin-top: 0.5rem;">0 clients connect√©s</div>
                            <div id="serverInfo" style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);"></div>
                        </div>
                    </div>

                    <!-- Actions -->
                    <div class="info-card">
                        <h3>‚ö° Actions</h3>
                        <div class="actions">
                            <button onclick="showConnect()" class="primary" id="connectBtn">
                                üîó Se Connecter
                            </button>
                            <button onclick="startHost()" class="primary" id="hostBtn">
                                üñ•Ô∏è D√©marrer Serveur
                            </button>
                            <button onclick="disconnect()" class="danger" id="disconnectBtn" disabled>
                                ‚ùå D√©connecter
                            </button>
                        </div>
                    </div>

                    <!-- Mise √† jour -->
                    <div class="info-card">
                        <h3>üîÑ Mise √† Jour</h3>
                        <div class="content">
                            <div id="updateInfo">V√©rification...</div>
                            <div class="actions" style="margin-top: 1rem;">
                                <button onclick="checkForUpdates()" class="primary" id="checkUpdateBtn">
                                    üîç V√©rifier
                                </button>
                                <button onclick="downloadUpdate()" class="success" id="downloadBtn" style="display: none;">
                                    üì• T√©l√©charger
                                </button>
                                <button onclick="installUpdate()" class="warning" id="installBtn" style="display: none;">
                                    üöÄ Installer
                                </button>
                            </div>
                            <div id="updateProgress" style="display: none; margin-top: 1rem;">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill"></div>
                                </div>
                                <div id="progressText" style="text-align: center; margin-top: 0.5rem; font-size: 0.8rem;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Activity Log -->
                    <div class="info-card" style="flex: 1;">
                        <h3>üìù Activit√© en Temps R√©el</h3>
                        <div class="activity-log" id="activityLog">
                            <div style="color: var(--text-muted); text-align: center; padding: 1rem;">
                                Aucune activit√© r√©cente
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Connect Modal -->
    <div class="modal" id="connectModal" style="display: none;" onclick="hideConnect()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h3>üîó Se Connecter √† un H√¥te</h3>
            <form onsubmit="connectToHost(event)">
                <div class="form-group">
                    <label for="hostIp">IP de l'h√¥te:</label>
                    <input type="text" id="hostIp" placeholder="192.168.1.100 ou localhost" value="localhost" required>
                </div>
                <div class="form-actions">
                    <button type="button" onclick="hideConnect()">Annuler</button>
                    <button type="submit" class="primary">üîó Se Connecter</button>
                </div>
            </form>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html> 